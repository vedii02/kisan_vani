{"ast":null,"code":"var _jsxFileName = \"D:\\\\Vedi_Practice\\\\AI\\\\kisan_vani\\\\frontend\\\\src\\\\App.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useRef } from 'react';\nimport { Mic, MicOff, Volume2 } from 'lucide-react';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function App() {\n  _s();\n  const [isListening, setIsListening] = useState(false);\n  const [text, setText] = useState('');\n  const [messages, setMessages] = useState([]);\n  const [selectedLanguage, setSelectedLanguage] = useState('hi-IN');\n  const [isProcessing, setIsProcessing] = useState(false);\n  const [isSpeaking, setIsSpeaking] = useState(false);\n  const audioRef = useRef(new Audio());\n  const mediaRecorderRef = useRef(null);\n  const audioChunksRef = useRef([]);\n  const streamRef = useRef(null);\n  const languages = [{\n    code: 'hi-IN',\n    name: '‡§π‡§ø‡§Ç‡§¶‡•Ä (Hindi)',\n    flag: 'üáÆüá≥'\n  }, {\n    code: 'en-US',\n    name: 'English',\n    flag: 'üá∫üá∏'\n  }, {\n    code: 'mr-IN',\n    name: '‡§Æ‡§∞‡§æ‡§†‡•Ä (Marathi)',\n    flag: 'üáÆüá≥'\n  }, {\n    code: 'gu-IN',\n    name: '‡™ó‡´Å‡™ú‡™∞‡™æ‡™§‡´Ä (Gujarati)',\n    flag: 'üáÆüá≥'\n  }, {\n    code: 'bn-IN',\n    name: '‡¶¨‡¶æ‡¶Ç‡¶≤‡¶æ (Bengali)',\n    flag: 'üáÆüá≥'\n  }, {\n    code: 'te-IN',\n    name: '‡∞§‡±Ü‡∞≤‡±Å‡∞ó‡±Å (Telugu)',\n    flag: 'üáÆüá≥'\n  }, {\n    code: 'ta-IN',\n    name: '‡Æ§‡ÆÆ‡Æø‡Æ¥‡Øç (Tamil)',\n    flag: 'üáÆüá≥'\n  }, {\n    code: 'kn-IN',\n    name: '‡≤ï‡≤®‡≥ç‡≤®‡≤° (Kannada)',\n    flag: 'üáÆüá≥'\n  }, {\n    code: 'ml-IN',\n    name: '‡¥Æ‡¥≤‡¥Ø‡¥æ‡¥≥‡¥Ç (Malayalam)',\n    flag: 'üáÆüá≥'\n  }, {\n    code: 'pa-IN',\n    name: '‡®™‡©∞‡®ú‡®æ‡®¨‡©Ä (Punjabi)',\n    flag: 'üáÆüá≥'\n  }];\n\n  // Start Recording\n  const startListening = async () => {\n    try {\n      console.log('üé§ Requesting microphone access...');\n      const stream = await navigator.mediaDevices.getUserMedia({\n        audio: {\n          channelCount: 1,\n          sampleRate: 48000,\n          echoCancellation: true,\n          noiseSuppression: true,\n          autoGainControl: true\n        }\n      });\n      streamRef.current = stream;\n      console.log('‚úÖ Microphone access granted');\n\n      // Check supported MIME types\n      const mimeType = MediaRecorder.isTypeSupported('audio/webm;codecs=opus') ? 'audio/webm;codecs=opus' : MediaRecorder.isTypeSupported('audio/webm') ? 'audio/webm' : 'audio/ogg';\n      console.log('üìº Using MIME type:', mimeType);\n      const mediaRecorder = new MediaRecorder(stream, {\n        mimeType\n      });\n      mediaRecorderRef.current = mediaRecorder;\n      audioChunksRef.current = [];\n      mediaRecorder.ondataavailable = e => {\n        if (e.data.size > 0) {\n          console.log('üì¶ Audio chunk:', e.data.size, 'bytes');\n          audioChunksRef.current.push(e.data);\n        }\n      };\n      mediaRecorder.onstop = async () => {\n        console.log('üõë Recording stopped');\n        console.log('üì¶ Total chunks:', audioChunksRef.current.length);\n\n        // Stop all tracks\n        if (streamRef.current) {\n          streamRef.current.getTracks().forEach(track => {\n            track.stop();\n            console.log('üîå Track stopped:', track.kind);\n          });\n          streamRef.current = null;\n        }\n        if (audioChunksRef.current.length === 0) {\n          alert('‚ùå No audio recorded. Please try again.');\n          return;\n        }\n        const audioBlob = new Blob(audioChunksRef.current, {\n          type: mimeType\n        });\n        console.log('üéµ Audio blob size:', audioBlob.size, 'bytes');\n        if (audioBlob.size < 1000) {\n          alert('‚ö†Ô∏è Audio too short. Please speak for at least 2 seconds.');\n          return;\n        }\n\n        // Convert to base64 and send\n        const base64Audio = await blobToBase64(audioBlob);\n        await processVoiceMessage(base64Audio);\n      };\n\n      // Start recording (collect chunks every 100ms)\n      mediaRecorder.start(100);\n      setIsListening(true);\n      console.log('üî¥ Recording started');\n    } catch (err) {\n      console.error('‚ùå Microphone error:', err);\n      if (err.name === 'NotAllowedError') {\n        alert('üé§ Microphone permission denied. Please allow microphone access.');\n      } else if (err.name === 'NotFoundError') {\n        alert('üé§ No microphone found. Please connect a microphone.');\n      } else {\n        alert(`‚ùå Error: ${err.message}`);\n      }\n    }\n  };\n\n  // Stop Recording\n  const stopListening = () => {\n    const recorder = mediaRecorderRef.current;\n    if (!recorder) {\n      console.log('‚ö†Ô∏è No active recorder');\n      return;\n    }\n    if (recorder.state === 'recording') {\n      console.log('üõë Stopping recorder...');\n      recorder.stop();\n      setIsListening(false);\n    } else {\n      console.log('‚ö†Ô∏è Recorder not in recording state:', recorder.state);\n    }\n  };\n\n  // Process Voice: STT ‚Üí Chat ‚Üí TTS\n  const processVoiceMessage = async audioBase64 => {\n    try {\n      setIsProcessing(true);\n      console.log('üì§ Sending to STT API...');\n      console.log('üìä Audio base64 length:', audioBase64.length);\n\n      // Step 1: Speech to Text\n      const sttRes = await fetch('http://localhost:8000/voice/stt', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n          audio: audioBase64,\n          language: selectedLanguage\n        })\n      });\n      console.log('üì• STT Response status:', sttRes.status);\n      if (!sttRes.ok) {\n        const errorText = await sttRes.text();\n        console.error('‚ùå STT failed:', errorText);\n        throw new Error(`STT failed: ${sttRes.status} - ${errorText}`);\n      }\n      const sttData = await sttRes.json();\n      console.log('‚úÖ STT Response:', sttData);\n      if (!sttData.text || sttData.text.trim() === '') {\n        alert('üîá Could not understand. Please speak clearly and try again.');\n        setIsProcessing(false);\n        return;\n      }\n\n      // Show transcribed text\n      console.log('üìù Transcribed text:', sttData.text);\n      setText(sttData.text);\n      const userMsg = {\n        role: 'user',\n        content: sttData.text\n      };\n      setMessages(prev => [...prev, userMsg]);\n\n      // Step 2: Get AI Response\n      console.log('ü§ñ Getting AI response...');\n      const chatRes = await fetch('http://localhost:8000/voice/chat', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n          message: sttData.text,\n          language: selectedLanguage,\n          farmer_id: 'farmer_123',\n          farmer_name: 'Ramesh Kumar'\n        })\n      });\n      if (!chatRes.ok) {\n        throw new Error(`Chat failed: ${chatRes.status}`);\n      }\n      const chatData = await chatRes.json();\n      console.log('‚úÖ AI Response:', chatData.response);\n      const aiMsg = {\n        role: 'assistant',\n        content: chatData.response\n      };\n      setMessages(prev => [...prev, aiMsg]);\n\n      // Step 3: Play AI voice\n      if (chatData.audio) {\n        console.log('üîä Playing AI voice...');\n        playAudio(chatData.audio);\n      } else {\n        console.log('‚ö†Ô∏è No audio in response');\n      }\n    } catch (err) {\n      console.error('‚ùå Voice processing error:', err);\n      alert(`‚ùå Error: ${err.message}`);\n    } finally {\n      setIsProcessing(false);\n    }\n  };\n\n  // Manual Text Send\n  const sendMessage = async () => {\n    if (!text.trim()) return;\n    const userMsg = {\n      role: 'user',\n      content: text\n    };\n    setMessages(prev => [...prev, userMsg]);\n    const messageText = text;\n    setText('');\n    setIsProcessing(true);\n    try {\n      const res = await fetch('http://localhost:8000/voice/chat', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n          message: messageText,\n          language: selectedLanguage,\n          farmer_id: 'farmer_123',\n          farmer_name: 'Ramesh Kumar'\n        })\n      });\n      const data = await res.json();\n      const aiMsg = {\n        role: 'assistant',\n        content: data.response\n      };\n      setMessages(prev => [...prev, aiMsg]);\n      if (data.audio) {\n        playAudio(data.audio);\n      }\n    } catch (err) {\n      console.error(err);\n      alert('Failed to send message');\n    } finally {\n      setIsProcessing(false);\n    }\n  };\n\n  // Play Audio\n  const playAudio = base64Audio => {\n    try {\n      setIsSpeaking(true);\n      const audioBlob = base64ToBlob(base64Audio, 'audio/mp3');\n      const audioUrl = URL.createObjectURL(audioBlob);\n      audioRef.current.src = audioUrl;\n      audioRef.current.onended = () => {\n        setIsSpeaking(false);\n        URL.revokeObjectURL(audioUrl);\n      };\n      audioRef.current.onerror = e => {\n        console.error('Audio play error:', e);\n        setIsSpeaking(false);\n      };\n      audioRef.current.play().catch(err => {\n        console.error('Play failed:', err);\n        setIsSpeaking(false);\n      });\n      console.log('‚ñ∂Ô∏è Audio playing');\n    } catch (err) {\n      console.error('Audio play error:', err);\n      setIsSpeaking(false);\n    }\n  };\n\n  // Helpers\n  const blobToBase64 = blob => new Promise((resolve, reject) => {\n    const reader = new FileReader();\n    reader.onloadend = () => {\n      const base64 = reader.result.split(',')[1];\n      console.log('‚úÖ Converted to base64, length:', base64.length);\n      resolve(base64);\n    };\n    reader.onerror = reject;\n    reader.readAsDataURL(blob);\n  });\n  const base64ToBlob = (b64, mime) => {\n    const bytes = atob(b64);\n    const arr = new Uint8Array(bytes.length);\n    for (let i = 0; i < bytes.length; i++) arr[i] = bytes.charCodeAt(i);\n    return new Blob([arr], {\n      type: mime\n    });\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"min-h-screen bg-gradient-to-br from-green-50 to-blue-50 p-6 flex flex-col items-center\",\n    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n      className: \"text-4xl font-bold mb-8 text-green-700\",\n      children: \"KisanAI \\uD83C\\uDF3E\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 300,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex flex-col items-center gap-4 mb-6\",\n      children: [/*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: isListening ? stopListening : startListening,\n        disabled: isProcessing,\n        className: `w-20 h-20 rounded-full flex items-center justify-center text-white shadow-xl transition-all ${isListening ? 'bg-red-500 animate-pulse scale-110' : isProcessing ? 'bg-gray-400' : 'bg-green-500 hover:scale-110 hover:shadow-2xl'}`,\n        children: isListening ? /*#__PURE__*/_jsxDEV(MicOff, {\n          size: 32\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 315,\n          columnNumber: 26\n        }, this) : /*#__PURE__*/_jsxDEV(Mic, {\n          size: 32\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 315,\n          columnNumber: 49\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 304,\n        columnNumber: 9\n      }, this), isListening && /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"text-red-600 font-bold animate-pulse\",\n        children: \"\\uD83D\\uDD34 Recording... Click to stop\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 319,\n        columnNumber: 11\n      }, this), isProcessing && /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"text-blue-600 font-bold\",\n        children: \"\\u23F3 Processing...\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 325,\n        columnNumber: 11\n      }, this), isSpeaking && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex items-center gap-2 text-purple-600 font-bold\",\n        children: [/*#__PURE__*/_jsxDEV(Volume2, {\n          className: \"animate-pulse\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 332,\n          columnNumber: 13\n        }, this), \"Speaking...\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 331,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n        value: selectedLanguage,\n        onChange: e => setSelectedLanguage(e.target.value),\n        className: \"px-6 py-3 rounded-lg border-2 border-green-300 text-lg font-semibold\",\n        disabled: isListening || isProcessing,\n        children: languages.map(lang => /*#__PURE__*/_jsxDEV(\"option\", {\n          value: lang.code,\n          children: [lang.flag, \" \", lang.name]\n        }, lang.code, true, {\n          fileName: _jsxFileName,\n          lineNumber: 344,\n          columnNumber: 13\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 337,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 303,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"w-full max-w-2xl mb-6\",\n      children: [/*#__PURE__*/_jsxDEV(\"textarea\", {\n        value: text,\n        onChange: e => setText(e.target.value),\n        placeholder: \"Or type your message here...\",\n        className: \"w-full p-4 border-2 border-green-200 rounded-xl text-lg resize-none\",\n        rows: 3\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 353,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: sendMessage,\n        disabled: isProcessing || !text.trim(),\n        className: \"mt-2 w-full bg-green-500 text-white px-6 py-3 rounded-xl hover:bg-green-600 disabled:bg-gray-300 font-bold\",\n        children: \"Send Message\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 360,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 352,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"w-full max-w-2xl flex flex-col gap-4\",\n      children: messages.map((msg, idx) => /*#__PURE__*/_jsxDEV(\"div\", {\n        className: `p-4 rounded-xl shadow-md ${msg.role === 'user' ? 'bg-purple-100 self-end max-w-[80%]' : 'bg-green-100 self-start max-w-[80%]'}`,\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"font-bold text-sm mb-1\",\n          children: msg.role === 'user' ? 'üë®‚Äçüåæ You' : 'ü§ñ KisanAI'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 380,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"text-lg\",\n          children: msg.content\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 383,\n          columnNumber: 13\n        }, this)]\n      }, idx, true, {\n        fileName: _jsxFileName,\n        lineNumber: 372,\n        columnNumber: 11\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 370,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 299,\n    columnNumber: 5\n  }, this);\n}\n_s(App, \"NME9p2RcVIq6jI5cNm+vsYhw+0c=\");\n_c = App;\nvar _c;\n$RefreshReg$(_c, \"App\");","map":{"version":3,"names":["React","useState","useRef","Mic","MicOff","Volume2","jsxDEV","_jsxDEV","App","_s","isListening","setIsListening","text","setText","messages","setMessages","selectedLanguage","setSelectedLanguage","isProcessing","setIsProcessing","isSpeaking","setIsSpeaking","audioRef","Audio","mediaRecorderRef","audioChunksRef","streamRef","languages","code","name","flag","startListening","console","log","stream","navigator","mediaDevices","getUserMedia","audio","channelCount","sampleRate","echoCancellation","noiseSuppression","autoGainControl","current","mimeType","MediaRecorder","isTypeSupported","mediaRecorder","ondataavailable","e","data","size","push","onstop","length","getTracks","forEach","track","stop","kind","alert","audioBlob","Blob","type","base64Audio","blobToBase64","processVoiceMessage","start","err","error","message","stopListening","recorder","state","audioBase64","sttRes","fetch","method","headers","body","JSON","stringify","language","status","ok","errorText","Error","sttData","json","trim","userMsg","role","content","prev","chatRes","farmer_id","farmer_name","chatData","response","aiMsg","playAudio","sendMessage","messageText","res","base64ToBlob","audioUrl","URL","createObjectURL","src","onended","revokeObjectURL","onerror","play","catch","blob","Promise","resolve","reject","reader","FileReader","onloadend","base64","result","split","readAsDataURL","b64","mime","bytes","atob","arr","Uint8Array","i","charCodeAt","className","children","fileName","_jsxFileName","lineNumber","columnNumber","onClick","disabled","value","onChange","target","map","lang","placeholder","rows","msg","idx","_c","$RefreshReg$"],"sources":["D:/Vedi_Practice/AI/kisan_vani/frontend/src/App.js"],"sourcesContent":["import React, { useState, useRef } from 'react';\nimport { Mic, MicOff, Volume2 } from 'lucide-react';\n\nexport default function App() {\n  const [isListening, setIsListening] = useState(false);\n  const [text, setText] = useState('');\n  const [messages, setMessages] = useState([]);\n  const [selectedLanguage, setSelectedLanguage] = useState('hi-IN');\n  const [isProcessing, setIsProcessing] = useState(false);\n  const [isSpeaking, setIsSpeaking] = useState(false);\n\n  const audioRef = useRef(new Audio());\n  const mediaRecorderRef = useRef(null);\n  const audioChunksRef = useRef([]);\n  const streamRef = useRef(null);\n\n  const languages = [\n    { code: 'hi-IN', name: '‡§π‡§ø‡§Ç‡§¶‡•Ä (Hindi)', flag: 'üáÆüá≥' },\n    { code: 'en-US', name: 'English', flag: 'üá∫üá∏' },\n    { code: 'mr-IN', name: '‡§Æ‡§∞‡§æ‡§†‡•Ä (Marathi)', flag: 'üáÆüá≥' },\n    { code: 'gu-IN', name: '‡™ó‡´Å‡™ú‡™∞‡™æ‡™§‡´Ä (Gujarati)', flag: 'üáÆüá≥' },\n    { code: 'bn-IN', name: '‡¶¨‡¶æ‡¶Ç‡¶≤‡¶æ (Bengali)', flag: 'üáÆüá≥' },\n    { code: 'te-IN', name: '‡∞§‡±Ü‡∞≤‡±Å‡∞ó‡±Å (Telugu)', flag: 'üáÆüá≥' },\n    { code: 'ta-IN', name: '‡Æ§‡ÆÆ‡Æø‡Æ¥‡Øç (Tamil)', flag: 'üáÆüá≥' },\n    { code: 'kn-IN', name: '‡≤ï‡≤®‡≥ç‡≤®‡≤° (Kannada)', flag: 'üáÆüá≥' },\n    { code: 'ml-IN', name: '‡¥Æ‡¥≤‡¥Ø‡¥æ‡¥≥‡¥Ç (Malayalam)', flag: 'üáÆüá≥' },\n    { code: 'pa-IN', name: '‡®™‡©∞‡®ú‡®æ‡®¨‡©Ä (Punjabi)', flag: 'üáÆüá≥' }\n  ];\n\n  // Start Recording\n  const startListening = async () => {\n    try {\n      console.log('üé§ Requesting microphone access...');\n      \n      const stream = await navigator.mediaDevices.getUserMedia({ \n        audio: {\n          channelCount: 1,\n          sampleRate: 48000,\n          echoCancellation: true,\n          noiseSuppression: true,\n          autoGainControl: true\n        }\n      });\n\n      streamRef.current = stream;\n      console.log('‚úÖ Microphone access granted');\n\n      // Check supported MIME types\n      const mimeType = MediaRecorder.isTypeSupported('audio/webm;codecs=opus')\n        ? 'audio/webm;codecs=opus'\n        : MediaRecorder.isTypeSupported('audio/webm')\n        ? 'audio/webm'\n        : 'audio/ogg';\n\n      console.log('üìº Using MIME type:', mimeType);\n\n      const mediaRecorder = new MediaRecorder(stream, { mimeType });\n      mediaRecorderRef.current = mediaRecorder;\n      audioChunksRef.current = [];\n\n      mediaRecorder.ondataavailable = (e) => {\n        if (e.data.size > 0) {\n          console.log('üì¶ Audio chunk:', e.data.size, 'bytes');\n          audioChunksRef.current.push(e.data);\n        }\n      };\n\n      mediaRecorder.onstop = async () => {\n        console.log('üõë Recording stopped');\n        console.log('üì¶ Total chunks:', audioChunksRef.current.length);\n        \n        // Stop all tracks\n        if (streamRef.current) {\n          streamRef.current.getTracks().forEach(track => {\n            track.stop();\n            console.log('üîå Track stopped:', track.kind);\n          });\n          streamRef.current = null;\n        }\n        \n        if (audioChunksRef.current.length === 0) {\n          alert('‚ùå No audio recorded. Please try again.');\n          return;\n        }\n\n        const audioBlob = new Blob(audioChunksRef.current, { type: mimeType });\n        console.log('üéµ Audio blob size:', audioBlob.size, 'bytes');\n\n        if (audioBlob.size < 1000) {\n          alert('‚ö†Ô∏è Audio too short. Please speak for at least 2 seconds.');\n          return;\n        }\n\n        // Convert to base64 and send\n        const base64Audio = await blobToBase64(audioBlob);\n        await processVoiceMessage(base64Audio);\n      };\n\n      // Start recording (collect chunks every 100ms)\n      mediaRecorder.start(100);\n      setIsListening(true);\n      console.log('üî¥ Recording started');\n\n    } catch (err) {\n      console.error('‚ùå Microphone error:', err);\n      if (err.name === 'NotAllowedError') {\n        alert('üé§ Microphone permission denied. Please allow microphone access.');\n      } else if (err.name === 'NotFoundError') {\n        alert('üé§ No microphone found. Please connect a microphone.');\n      } else {\n        alert(`‚ùå Error: ${err.message}`);\n      }\n    }\n  };\n\n  // Stop Recording\n  const stopListening = () => {\n    const recorder = mediaRecorderRef.current;\n    \n    if (!recorder) {\n      console.log('‚ö†Ô∏è No active recorder');\n      return;\n    }\n\n    if (recorder.state === 'recording') {\n      console.log('üõë Stopping recorder...');\n      recorder.stop();\n      setIsListening(false);\n    } else {\n      console.log('‚ö†Ô∏è Recorder not in recording state:', recorder.state);\n    }\n  };\n\n  // Process Voice: STT ‚Üí Chat ‚Üí TTS\n  const processVoiceMessage = async (audioBase64) => {\n    try {\n      setIsProcessing(true);\n      console.log('üì§ Sending to STT API...');\n      console.log('üìä Audio base64 length:', audioBase64.length);\n\n      // Step 1: Speech to Text\n      const sttRes = await fetch('http://localhost:8000/voice/stt', {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify({\n          audio: audioBase64,\n          language: selectedLanguage\n        })\n      });\n\n      console.log('üì• STT Response status:', sttRes.status);\n\n      if (!sttRes.ok) {\n        const errorText = await sttRes.text();\n        console.error('‚ùå STT failed:', errorText);\n        throw new Error(`STT failed: ${sttRes.status} - ${errorText}`);\n      }\n\n      const sttData = await sttRes.json();\n      console.log('‚úÖ STT Response:', sttData);\n\n      if (!sttData.text || sttData.text.trim() === '') {\n        alert('üîá Could not understand. Please speak clearly and try again.');\n        setIsProcessing(false);\n        return;\n      }\n\n      // Show transcribed text\n      console.log('üìù Transcribed text:', sttData.text);\n      setText(sttData.text);\n      const userMsg = { role: 'user', content: sttData.text };\n      setMessages(prev => [...prev, userMsg]);\n\n      // Step 2: Get AI Response\n      console.log('ü§ñ Getting AI response...');\n      const chatRes = await fetch('http://localhost:8000/voice/chat', {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify({\n          message: sttData.text,\n          language: selectedLanguage,\n          farmer_id: 'farmer_123',\n          farmer_name: 'Ramesh Kumar'\n        })\n      });\n\n      if (!chatRes.ok) {\n        throw new Error(`Chat failed: ${chatRes.status}`);\n      }\n\n      const chatData = await chatRes.json();\n      console.log('‚úÖ AI Response:', chatData.response);\n\n      const aiMsg = { role: 'assistant', content: chatData.response };\n      setMessages(prev => [...prev, aiMsg]);\n\n      // Step 3: Play AI voice\n      if (chatData.audio) {\n        console.log('üîä Playing AI voice...');\n        playAudio(chatData.audio);\n      } else {\n        console.log('‚ö†Ô∏è No audio in response');\n      }\n\n    } catch (err) {\n      console.error('‚ùå Voice processing error:', err);\n      alert(`‚ùå Error: ${err.message}`);\n    } finally {\n      setIsProcessing(false);\n    }\n  };\n\n  // Manual Text Send\n  const sendMessage = async () => {\n    if (!text.trim()) return;\n\n    const userMsg = { role: 'user', content: text };\n    setMessages(prev => [...prev, userMsg]);\n    const messageText = text;\n    setText('');\n    setIsProcessing(true);\n\n    try {\n      const res = await fetch('http://localhost:8000/voice/chat', {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify({\n          message: messageText,\n          language: selectedLanguage,\n          farmer_id: 'farmer_123',\n          farmer_name: 'Ramesh Kumar'\n        })\n      });\n\n      const data = await res.json();\n      const aiMsg = { role: 'assistant', content: data.response };\n      setMessages(prev => [...prev, aiMsg]);\n\n      if (data.audio) {\n        playAudio(data.audio);\n      }\n\n    } catch (err) {\n      console.error(err);\n      alert('Failed to send message');\n    } finally {\n      setIsProcessing(false);\n    }\n  };\n\n  // Play Audio\n  const playAudio = (base64Audio) => {\n    try {\n      setIsSpeaking(true);\n      const audioBlob = base64ToBlob(base64Audio, 'audio/mp3');\n      const audioUrl = URL.createObjectURL(audioBlob);\n      \n      audioRef.current.src = audioUrl;\n      audioRef.current.onended = () => {\n        setIsSpeaking(false);\n        URL.revokeObjectURL(audioUrl);\n      };\n      audioRef.current.onerror = (e) => {\n        console.error('Audio play error:', e);\n        setIsSpeaking(false);\n      };\n      audioRef.current.play().catch(err => {\n        console.error('Play failed:', err);\n        setIsSpeaking(false);\n      });\n      console.log('‚ñ∂Ô∏è Audio playing');\n    } catch (err) {\n      console.error('Audio play error:', err);\n      setIsSpeaking(false);\n    }\n  };\n\n  // Helpers\n  const blobToBase64 = (blob) =>\n    new Promise((resolve, reject) => {\n      const reader = new FileReader();\n      reader.onloadend = () => {\n        const base64 = reader.result.split(',')[1];\n        console.log('‚úÖ Converted to base64, length:', base64.length);\n        resolve(base64);\n      };\n      reader.onerror = reject;\n      reader.readAsDataURL(blob);\n    });\n\n  const base64ToBlob = (b64, mime) => {\n    const bytes = atob(b64);\n    const arr = new Uint8Array(bytes.length);\n    for (let i = 0; i < bytes.length; i++) arr[i] = bytes.charCodeAt(i);\n    return new Blob([arr], { type: mime });\n  };\n\n  return (\n    <div className=\"min-h-screen bg-gradient-to-br from-green-50 to-blue-50 p-6 flex flex-col items-center\">\n      <h1 className=\"text-4xl font-bold mb-8 text-green-700\">KisanAI üåæ</h1>\n\n      {/* Voice Button */}\n      <div className=\"flex flex-col items-center gap-4 mb-6\">\n        <button\n          onClick={isListening ? stopListening : startListening}\n          disabled={isProcessing}\n          className={`w-20 h-20 rounded-full flex items-center justify-center text-white shadow-xl transition-all ${\n            isListening \n              ? 'bg-red-500 animate-pulse scale-110' \n              : isProcessing\n              ? 'bg-gray-400'\n              : 'bg-green-500 hover:scale-110 hover:shadow-2xl'\n          }`}\n        >\n          {isListening ? <MicOff size={32} /> : <Mic size={32} />}\n        </button>\n\n        {isListening && (\n          <p className=\"text-red-600 font-bold animate-pulse\">\n            üî¥ Recording... Click to stop\n          </p>\n        )}\n\n        {isProcessing && (\n          <p className=\"text-blue-600 font-bold\">\n            ‚è≥ Processing...\n          </p>\n        )}\n\n        {isSpeaking && (\n          <div className=\"flex items-center gap-2 text-purple-600 font-bold\">\n            <Volume2 className=\"animate-pulse\" />\n            Speaking...\n          </div>\n        )}\n\n        <select\n          value={selectedLanguage}\n          onChange={(e) => setSelectedLanguage(e.target.value)}\n          className=\"px-6 py-3 rounded-lg border-2 border-green-300 text-lg font-semibold\"\n          disabled={isListening || isProcessing}\n        >\n          {languages.map((lang) => (\n            <option key={lang.code} value={lang.code}>\n              {lang.flag} {lang.name}\n            </option>\n          ))}\n        </select>\n      </div>\n\n      {/* Text Input */}\n      <div className=\"w-full max-w-2xl mb-6\">\n        <textarea\n          value={text}\n          onChange={(e) => setText(e.target.value)}\n          placeholder=\"Or type your message here...\"\n          className=\"w-full p-4 border-2 border-green-200 rounded-xl text-lg resize-none\"\n          rows={3}\n        />\n        <button\n          onClick={sendMessage}\n          disabled={isProcessing || !text.trim()}\n          className=\"mt-2 w-full bg-green-500 text-white px-6 py-3 rounded-xl hover:bg-green-600 disabled:bg-gray-300 font-bold\"\n        >\n          Send Message\n        </button>\n      </div>\n\n      {/* Messages */}\n      <div className=\"w-full max-w-2xl flex flex-col gap-4\">\n        {messages.map((msg, idx) => (\n          <div\n            key={idx}\n            className={`p-4 rounded-xl shadow-md ${\n              msg.role === 'user'\n                ? 'bg-purple-100 self-end max-w-[80%]'\n                : 'bg-green-100 self-start max-w-[80%]'\n            }`}\n          >\n            <div className=\"font-bold text-sm mb-1\">\n              {msg.role === 'user' ? 'üë®‚Äçüåæ You' : 'ü§ñ KisanAI'}\n            </div>\n            <div className=\"text-lg\">{msg.content}</div>\n          </div>\n        ))}\n      </div>\n    </div>\n  );\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}